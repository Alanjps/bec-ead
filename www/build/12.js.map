{"version":3,"sources":["../../src/pages/chat/chat.module.ts","../../src/components/menu-sup/menu-sup.module.ts","../../src/components/menu-sup/menu-sup.ts","../../src/pages/chat/chat.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ChatPage } from './chat';\r\nimport { MenuSupModule } from '../../components/menu-sup/menu-sup.module'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ChatPage\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ChatPage),\r\n    MenuSupModule\r\n  ],\r\n})\r\nexport class ChatPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.module.ts","import { NgModule } from '@angular/core';\r\nimport { MenuSupComponent } from './menu-sup';\r\nimport { IonicModule } from 'ionic-angular';\r\n\r\n@NgModule({\r\n\tdeclarations: [MenuSupComponent],\r\n\timports: [IonicModule],\r\n\texports: [MenuSupComponent]\r\n})\r\nexport class MenuSupModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/menu-sup/menu-sup.module.ts","import { Component, Input } from '@angular/core';\r\nimport { NavController, NavParams, LoadingController, ToastController, ModalController  } from 'ionic-angular';\r\nimport { Storage } from '@ionic/storage';\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\nimport { HttpServiceProvider } from '../../providers/http-service/http-service';\r\nimport { ChatPage } from '../../pages/chat/chat';\r\n\r\n@Component({\r\n  selector: 'menu-sup',\r\n  templateUrl: 'menu-sup.html'\r\n})\r\nexport class MenuSupComponent {\r\n\r\n  @Input() active: boolean;\r\n \r\n  public version : string;\r\n  public pendentChat : any = null;\r\n  public project: string;\r\n  public intervalHandle: any = null;\r\n  \r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    public authService: AuthProvider,\r\n    public toastCtrl: ToastController,\r\n    public loadingCtrl: LoadingController,\r\n    public storage: Storage,\r\n    public http: HttpServiceProvider,\r\n    public modalCtrl: ModalController,\r\n  ) {\r\n\r\n    this.getUnreadChats();\r\n    if (this.intervalHandle != null) clearInterval(this.intervalHandle);\r\n    this.intervalHandle = setInterval(()=>{\r\n      this.getUnreadChats();\r\n    },5000);\r\n  }\r\n\r\n  ngOnInit(){\r\n    this.storage.get('Project').then((value)=>{\r\n      this.project = value;\r\n      /*PROJETOS:\r\n        marketing-house\r\n        edicom\r\n        vcc\r\n      */\r\n    });\r\n    this.storage.get('LayoutVersion').then((value) => {\r\n      this.version = value;\r\n    });\r\n  }\r\n  \r\n  redirectToChatPage() {\r\n    let userModal = this.modalCtrl.create('chat-page', { pendentChat: this.pendentChat });\r\n    userModal.onDidDismiss(data => {\r\n      /* if (data){\r\n        let loading = this.loadingCtrl.create({\r\n          content: 'Espere...'\r\n        });\r\n        loading.present();\r\n        this.storage.set('first', false);\r\n        if (this.credential.firstAccess == true)\r\n          this.navCtrl.push('tab-page');\r\n        loading.dismiss();\r\n      } */\r\n    });\r\n    userModal.present();\r\n/*     if (this.navCtrl.getActive().component !== ChatPage) {\r\n      this.navCtrl.setRoot('chat-page');\r\n    } */\r\n  }\r\n\r\n  getUnreadChats(){\r\n    this.storage.get('clienteId').then((id) => {\r\n      this.http.getAll('/mensagens/remetentes', { user_id: id }, 'get')\r\n        .subscribe((data: any) => {\r\n          if (data && data.length > 0){\r\n            this.pendentChat = data;\r\n          }else{\r\n            this.pendentChat = null;\r\n          }\r\n          this.storage.set('remetentes', data);  \r\n        })\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/menu-sup/menu-sup.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { Storage } from '@ionic/storage';\r\nimport { IonicPage, LoadingController, NavController, NavParams, Slides, ModalController, ViewController } from 'ionic-angular';\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\nimport { HttpServiceProvider } from '../../providers/http-service/http-service';\r\nimport moment from 'moment';\r\nimport { Camera, CameraOptions } from \"@ionic-native/camera\";\r\nimport { v } from '@angular/core/src/render3';\r\nimport { PusherServiceProvider } from '../../providers/pusher-service/pusher-service';\r\n\r\n@IonicPage({\r\n  name: 'chat-page'\r\n})\r\n@Component({\r\n  selector: 'page-chat',\r\n  templateUrl: 'chat.html',\r\n})\r\nexport class ChatPage {\r\n  private projects : [any];\r\n  private selectedProject : {} | null = null;\r\n  private selectedProjectId : number | null = null;\r\n\r\n  private users : [any] | null;\r\n  private selectedUser : {} | null = null;\r\n  private selectedUserId : number | null = null;\r\n  private userId? : string;\r\n\r\n  private messages : any | null;\r\n  private newMessage : string;\r\n\r\n  private recents = [];\r\n  private showMessageAllBox : boolean = false;\r\n  private sendAll : boolean = false;\r\n  private search : string = '';\r\n\r\n  private ativo : {}; //usuario logado\r\n  private receptivo : {}; //usuario contactado\r\n\r\n  private recentUser : number | null = null;\r\n  private firstAccess : boolean = true;\r\n\r\n  public titleTesteira: string = '';\r\n  public complementTitle: string = '';\r\n\r\n  private version: string;\r\n  public globalUrl: string = '';\r\n  public fileUpload:any;\r\n  public perfilType: number = 3;\r\n  public idiom: string = '';\r\n  public remetentesUnread: any;\r\n  public project: string;\r\n\r\n  public showContacts: boolean = false;\r\n  public showChat: boolean = false;\r\n\r\n  public motivos: any = [];\r\n\r\n  //---------------------------------------------------\r\n  public showMotivosContainer: boolean = false;\r\n  public showRecentUserContainer: boolean = false;\r\n  public showChatContainer: boolean = false;\r\n  public lastMessageId: number = null;\r\n  public lastMessageIdInterval: any;\r\n  public iconProfile: string  = '';\r\n  public iconDefaultMotivos: string = '';\r\n  public recentsInf : any = [];\r\n  public cont : number = 0;\r\n\r\n  public pendentChat: any = null;\r\n\r\n  @ViewChild(Slides) slides: Slides;\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public authService: AuthProvider,\r\n    public http: HttpServiceProvider,\r\n    public loadingCtrl: LoadingController,\r\n    public storage: Storage,\r\n    public camera: Camera,\r\n    public modalCtrl: ModalController,\r\n    public viewCtrl: ViewController,\r\n    private pusher: PusherServiceProvider\r\n  ) {\r\n    clearInterval(this.lastMessageIdInterval);\r\n    \r\n    this.storage.get('Platform').then((value)=>{\r\n      switch(value){\r\n        case 'android':\r\n          this.iconProfile = '../../assets/imgs/user-profile.png';\r\n          this.iconDefaultMotivos = '../../assets/imgs/default-motivo.png';\r\n          break;\r\n\r\n        case 'ios':\r\n          this.iconProfile = './assets/imgs/user-profile.png';\r\n          this.iconDefaultMotivos = './assets/imgs/default-motivo.png';\r\n          break;\r\n      }\r\n    });\r\n\r\n    storage.get('GlobalUrl').then((value) => {\r\n      this.globalUrl = value;\r\n    });\r\n\r\n    this.getMotivos();\r\n\r\n    this.pendentChat = navParams.get('pendentChat');\r\n\r\n    if (this.pendentChat){\r\n      if(this.pendentChat.length > 1){\r\n        this.getConversasAtivas()\r\n        this.showRecentUsersPage()\r\n      }else{\r\n        this.getConversasAtivas()\r\n        this.goDirectlyToUserMessage(this.pendentChat[0]);\r\n      }\r\n\r\n    }else{\r\n      this.showMotivosPage();\r\n    }\r\n\r\n  }\r\n\r\n  doInfinite(infiniteScroll?) {\r\n    setTimeout(() => {\r\n      let intCont = 0;\r\n      for (let i = this.cont; i < this.recents.length; i++) {\r\n        if (intCont < 10){ \r\n\r\n          this.recentsInf.push( this.recents[i] );\r\n          this.cont = this.cont + 1;\r\n        }else{\r\n          break;\r\n        }\r\n        intCont ++;\r\n      }\r\n\r\n      if (infiniteScroll) infiniteScroll.complete();\r\n    }, 700);\r\n  }\r\n\r\n  loadPusher(){\r\n    this.storage.get('clienteId').then((valor) => {\r\n      const channel = this.pusher.init();\r\n      channel.bind('App\\\\Events\\\\MessageSent', (data) => {\r\n        if (data && data.message && data.message.remetente_id == this.selectedUserId){\r\n          if (/* this.perfilType == 3 && */ data.message.notification == false){\r\n            let newMessageReceived = {\r\n              remetente:{\r\n                id: data.message.remetente_id\r\n              },\r\n              notification: data.message.notification == false ? 0 : 1,\r\n              type:  data.message.mensagem.substring(0, 11) == 'data:image/' ? 'file' : null,\r\n              mensagem_formatada: data.message.mensagem_formatada,\r\n              created_at: moment(data.message.created_at).locale('pt-br').format('lll'),\r\n            } \r\n            this.messages.push(newMessageReceived);\r\n            this.scrollToBottom();\r\n          }\r\n\r\n          this.http.getAll('/mensagens/mask-read-msg', { remetente : data.message.remetente_id, user_id: this.userId }, 'get')\r\n          .subscribe((result: any) => {\r\n          })\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(){\r\n    const channel = this.pusher.init();\r\n    channel.unbind('App\\\\Events\\\\MessageSent');\r\n  }\r\n\r\n  openGallery(all = false) {\r\n    const options: CameraOptions = {\r\n      quality: 100,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY\r\n    };\r\n    this.camera.getPicture(options).then(imageData => {\r\n        this.fileUpload = \"data:image/jpeg;base64,\" + imageData;\r\n\r\n        let fileModal = this.modalCtrl.create('file-modal', {file: this.fileUpload});\r\n        fileModal.onDidDismiss(data => {\r\n              if (data.sendFile == true){\r\n                if (all == true){\r\n                  this.sendMessageAll(all, false, true);\r\n                }else{\r\n                  this.sendMessage(all, false, true)\r\n                }\r\n              }else {\r\n                this.fileUpload = null;\r\n              }\r\n        });\r\n        fileModal.present();\r\n    });\r\n  }\r\n\r\n  cleanVariables (tipo: number) {\r\n    if (tipo == 0 || tipo == 1){\r\n      this.users = null;\r\n      this.selectedUser = \"\";\r\n      this.selectedUserId = null;\r\n    } else if (tipo == 0 || tipo == 2){\r\n      this.selectedProject = null;\r\n    }\r\n    this.messages = null;\r\n    this.newMessage = null;\r\n  }\r\n\r\n  ionViewDidEnter () {\r\n    this.storage.get('Project').then((value)=>{\r\n        this.project = value;\r\n    });\r\n\r\n    this.storage.get('Idiom').then((value) => {\r\n      this.idiom = value;\r\n\r\n      this.titleTesteira = this.idiom == '01' ? 'Chat' : 'Asistencia';\r\n      this.complementTitle = '';\r\n    })\r\n\r\n    this.storage.get('clienteProfileId').then((value) => {\r\n      this.perfilType = value;\r\n    })\r\n\r\n    this.storage.get('LayoutVersion').then((value) => {\r\n      this.version = value;\r\n    });\r\n\r\n    this.loadPusher();\r\n\r\n  }\r\n\r\n  ionViewDidLeave(){\r\n    this.firstAccess = true;\r\n    if (this.recents && this.recents.length > 0) this.recentUser = this.recents[0]['id']; \r\n  }\r\n\r\n  getUsers(){\r\n    this.cleanVariables(1);\r\n\r\n    this.storage.get('clienteId').then((valor) => {\r\n      if(typeof valor != \"undefined\"){\r\n        this.userId = valor;\r\n        \r\n        let data = { user_id: this.userId }\r\n\r\n        if (this.selectedProjectId != null) data[\"project_id\"] = this.selectedProjectId;\r\n        this.http.getAll('/mensagens/app/getUsuarios', data , 'get')\r\n        .subscribe((users: any) => {\r\n          this.users = users.map((u) => {\r\n            return {\r\n              id: u.id,\r\n              nome: u.nome,\r\n              thumb: u.thumb? u.thumb : '',\r\n            }\r\n          });\r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n  getRecentUsers(){\r\n    this.storage.get('clienteId').then((id) => {\r\n      this.userId = id;\r\n\r\n      let loading = this.loadingCtrl.create({\r\n        content: 'Espere...'\r\n      });\r\n      this.recents = null;\r\n      loading.present();      \r\n      this.http.getAll('/mensagens/getData', { remetente : null, user_id: this.userId }, 'get')\r\n        .subscribe((data: any) => {\r\n          this.recents = data.remetentes.map((r) => {\r\n            const recent = r['destinatario'].id == this.userId ? r['remetente'] : r['destinatario'];\r\n\r\n            return {\r\n              id: recent.id,\r\n              nome: recent.nome,\r\n              thumb: recent.thumb? recent.thumb : this.iconProfile,\r\n              lido: r.lido == 0 ? false : true,\r\n              mensagem: r.mensagem_formatada,\r\n              destacar: this.pendentChat && this.pendentChat.filter((p)=>recent.id == p.remetente_id).length > 0 ? true : false\r\n            }\r\n          });\r\n\r\n          this.doInfinite();\r\n          loading.dismiss();\r\n        })\r\n    });\r\n  }\r\n  \r\n  getUserMessages(remetente = null, loop?){\r\n    this.storage.get('clienteId').then((id) => {\r\n      this.userId = id;\r\n\r\n      let loading = this.loadingCtrl.create({\r\n        content: 'Espere...'\r\n      });\r\n      loading.present();\r\n\r\n      if ( this.pendentChat && this.pendentChat.length > 0 && remetente){\r\n        this.pendentChat = this.pendentChat.filter((p)=>p.remetente_id !== remetente);\r\n      }\r\n\r\n      this.http.getAll('/mensagens/getData', { remetente : remetente, user_id: this.userId }, 'get')\r\n        .subscribe((data: any) => {\r\n          let mensagem = '';\r\n\r\n          if (remetente != null){\r\n            this.messages = data.mensagens.map((m) => {        \r\n                return {\r\n                  ...m, \r\n                  type: m.mensagem.substring(0, 11) == 'data:image/' ? 'file' : null,\r\n                  created_at: moment(m.created_at).locale('pt-br').format('lll'),\r\n                }\r\n            });\r\n            if (this.perfilType == 3){\r\n              this.messages = this.messages.filter((d,idx) => {\r\n                return d.notification == 0;\r\n              })\r\n            }\r\n\r\n            this.lastMessageId = this.messages[this.messages.length - 1].id;\r\n            mensagem = this.messages[0];\r\n            if (remetente && this.messages.length > 0){\r\n              this.ativo = mensagem['remetente'].id == this.userId ? mensagem['remetente'] : mensagem['destinatario'];\r\n              this.receptivo = mensagem['remetente'].id == this.userId ? mensagem['destinatario'] : mensagem['remetente'];\r\n\r\n              this.ativo['thumb'] = this.ativo['thumb'] ? this.ativo['thumb'] : this.iconProfile;\r\n              this.receptivo['thumb'] = this.receptivo['thumb'] ? this.receptivo['thumb'] : this.iconProfile;\r\n            }\r\n            this.scrollToBottom();\r\n          }\r\n          loading.dismiss();\r\n        })\r\n    });\r\n  }\r\n\r\n  getLastMessageId( user_id, remetente_id){\r\n    this.http.getAll('/mensagens/last-message-id', { remetente_id, user_id }, 'get')\r\n      .subscribe((data: any) => {\r\n        let lastId = data;\r\n\r\n        if (this.lastMessageId != null && lastId > this.lastMessageId){\r\n            this.lastMessageId = lastId;\r\n            this.getUserMessages(remetente_id);\r\n          }\r\n      });\r\n  }\r\n\r\n  goDirectlyToUserMessage(userDirectly){\r\n    let user = {\r\n      id: userDirectly.remetente_id,\r\n      nome: userDirectly.remetente.nome\r\n    }\r\n    this.selectRecentUser(user);\r\n  }\r\n\r\n  getConversasAtivas(){\r\n    this.getRecentUsers();\r\n    this.showMotivosContainer = false;\r\n    this.showRecentUserContainer = true;\r\n  }\r\n  \r\n  sendMessage = async (all = false, notification = false, isFile?) => {\r\n    return await new Promise((resolve, reject) => {\r\n      let data = {};\r\n    \r\n      this.storage.get('clienteId').then((user_id) => {\r\n  \r\n        const mensagem = isFile ? this.fileUpload : this.newMessage && this.newMessage.length > 0 ? this.newMessage.trim() : \"\";\r\n        const destinatario_id = all == true ?\r\n          null : \r\n            this.selectedUserId == null ? \r\n              null : \r\n              this.selectedUserId;\r\n\r\n        const project_id = this.selectedProjectId == null ? null : this.selectedProjectId;\r\n\r\n        if (mensagem.length > 0){\r\n          data = {\r\n            mensagem: mensagem,\r\n            user_id: user_id,\r\n            notificacao: notification\r\n          };\r\n          this.sendAll === true ? data['project_id'] = project_id : data['destinatario_id'] = destinatario_id;\r\n\r\n          this.http.post('/mensagens/store', data)\r\n            .subscribe((result : any) => {\r\n              if (this.selectedUserId) {\r\n\r\n                if (isFile != true){\r\n\r\n                  let newMessageSend = {\r\n                    remetente:{\r\n                      id: user_id\r\n                    },\r\n                    notification: notification == false ? 0 : 1,\r\n                    type: null,\r\n                    mensagem_formatada: mensagem,\r\n                    created_at: moment().locale('pt-br').format('lll'),\r\n                  }\r\n\r\n                  this.messages.push(newMessageSend);\r\n                  this.scrollToBottom();\r\n                }else{\r\n                  this.getUserMessages(this.selectedUserId);\r\n\r\n                }\r\n              }\r\n              resolve(); \r\n            })\r\n          this.newMessage = '';\r\n        }  \r\n      });\r\n    });\r\n  }\r\n\r\n  sendMessageAll = async (all = false, notification = false, isFile?) => {\r\n    this.sendAll = true;\r\n    await this.sendMessage(all, notification, isFile);\r\n    this.sendAll = false;\r\n  }\r\n\r\n  cancelMessageAll(){\r\n    this.showMessageAllBox = false;\r\n    this.newMessage = null;\r\n    this.getConversasAtivas();\r\n    this.getRecentUsers();\r\n  }\r\n\r\n  selectRecentUser(user){\r\n    this.selectedUserId = user.id;\r\n    this.selectedUser = user;\r\n    this.recentUser = user.id;\r\n    this.getUserMessages(user.id);\r\n        \r\n    this.showChatContainer = true;\r\n    this.showRecentUserContainer = false;\r\n\r\n    this.lastMessageId = null;\r\n/*     setTimeout(()=>{\r\n      this.lastMessageIdInterval = setInterval(()=>{\r\n        this.storage.get('clienteId').then((user_id) => {\r\n          if (this.lastMessageId != null){\r\n            this.storage.get('clienteId').then((user_id) => {\r\n              this.getLastMessageId(user_id, this.selectedUserId);\r\n            });\r\n           }\r\n        })\r\n      },3000);\r\n    },3000); */\r\n    //this.loadPusher();\r\n  }\r\n\r\n\r\n  scrollToBottom() {\r\n    setTimeout(() => {\r\n      var objDiv = document.getElementById(\"cards\");\r\n        if (objDiv) objDiv.scrollTop = objDiv.scrollHeight;\r\n    }, 100);\r\n\r\n  }\r\n\r\n  cancelMotivos(){\r\n    this.showMotivosContainer = false;\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n  getMotivos(){\r\n    this.showMotivosContainer = true;\r\n    let loading = this.loadingCtrl.create({\r\n      content: 'Espere...'\r\n    });\r\n    loading.present();\r\n    this.storage.get('clienteId').then((userId) => {\r\n      this.http.getAll('/api/get-motivos', { user_id: userId }, 'get')\r\n      .subscribe((data:any) => {\r\n        this.motivos = data.map((m) => {\r\n          return {...m, thumb: m.thumb ? m.thumb : this.iconDefaultMotivos}\r\n        });\r\n        loading.dismiss();\r\n      });\r\n    });\r\n  }\r\n\r\n  selectMotivo(motivo){\r\n    let loading = this.loadingCtrl.create({\r\n      content: 'Espere...'\r\n    });\r\n    loading.present();\r\n    this.storage.get('clienteId').then((userId) => {\r\n      this.http.getAll('/api/send-motivo', { user_id: userId, motivo_id: motivo.id })\r\n      .subscribe((data:any) => {\r\n        loading.dismiss();\r\n        this.getRecentUsers();\r\n\r\n        if (motivo && motivo.curadores.length == 1){\r\n          this.selectRecentUser(motivo.curadores[0]);\r\n        }else{\r\n          this.showRecentUsersPage()\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  showMotivosPage(){\r\n    this.showMotivosContainer = true;\r\n  }\r\n\r\n  showRecentUsersPage(){\r\n    this.showMotivosContainer = false;\r\n    this.showRecentUserContainer = true;\r\n    this.ngOnDestroy();\r\n  }\r\n\r\n  showChatPage(){\r\n    this.showChatContainer = true;\r\n    this.showChat = true;\r\n  }\r\n\r\n  cancelRecentUsers(){\r\n    this.showRecentUserContainer = false;\r\n    this.showMotivosContainer = true;\r\n    this.ngOnDestroy();\r\n  }\r\n\r\n  cancelChat(){\r\n    this.getConversasAtivas();\r\n    this.showChatContainer = false;\r\n    this.showRecentUserContainer = true;\r\n    clearInterval(this.lastMessageIdInterval);\r\n    this.ngOnDestroy();\r\n\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.ts"],"sourceRoot":""}