{"version":3,"sources":["../../src/components/quiz/quiz.module.ts","../../src/components/quiz/quiz.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { QuizComponent } from './quiz';\r\nimport { IonicModule, IonicPageModule } from 'ionic-angular';\r\n\r\n@NgModule({\r\n\tdeclarations: [QuizComponent],\r\n\timports: [IonicModule, IonicPageModule.forChild(QuizComponent)],\r\n\texports: [QuizComponent]\r\n})\r\nexport class QuizModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/quiz/quiz.module.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ViewController, LoadingController, ToastController, Select } from 'ionic-angular';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera';\r\nimport { Storage } from '@ionic/storage';\r\nimport { environment as ENV } from '../../environments/environment';\r\n\r\n@IonicPage({\r\n  name: 'quiz'\r\n})\r\n\r\n@Component({\r\n  selector: 'quiz',\r\n  templateUrl: 'quiz.html'\r\n})\r\nexport class QuizComponent {\r\n\r\n  public ENV = ENV;\r\n  public galleryFile: boolean;\r\n  public indexFile:any;\r\n  public formulario: any = [];\r\n  public fileUpload:any;\r\n  public idiom : string = '';\r\n\r\n  @ViewChild('selectFile') selectFile: Select;\r\n\r\n  public version : string;\r\n  public globalUrl: string = '';\r\n  public project;\r\n\r\n  constructor(    \r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    public formBuilder: FormBuilder,\r\n    public viewCtrl: ViewController,\r\n    public toastCtrl : ToastController,\r\n    public loadingCtrl : LoadingController,\r\n    public authService: AuthProvider,\r\n    public storage: Storage,\r\n    public camera: Camera\r\n  ) {\r\n\r\n    storage.get('GlobalUrl').then((value) => {\r\n      this.globalUrl = value;\r\n    });\r\n    \r\n    this.loadQuiz();\r\n  }\r\n\r\n  loadQuiz(){\r\n\r\n    let vars: any = {\r\n      tipo:'',\r\n      lesson_id:''\r\n    };\r\n\r\n    let loading = this.loadingCtrl.create({\r\n      content: 'Espere...'\r\n    });\r\n    loading.present();\r\n\r\n    vars.lesson_id = this.navParams.get('lesson_id');\r\n\r\n    this.authService.request('/api/testes/get', vars).then((result) => {\r\n      loading.dismiss();\r\n      if(result){\r\n        this.formulario = result;\r\n      }else{\r\n        this.viewCtrl.dismiss();\r\n      }\r\n    });\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.storage.get('LayoutVersion').then((value) => {\r\n      this.version = value;\r\n    });\r\n    this.storage.get('Idiom').then((value) => {\r\n      this.idiom = value;\r\n    })\r\n    this.storage.get('Project').then((value)=>{\r\n      this.project = value;\r\n    });\r\n  }\r\n\r\n  salva(){\r\n    let mensagem='';\r\n    let chave = 0;\r\n    this.formulario.forEach((element, key) => {\r\n      if(element.respostas == ''){\r\n        chave = key +1;\r\n        mensagem = 'Favor responder a questÃ£o '+ chave;\r\n      }\r\n    });\r\n\r\n    if(mensagem){\r\n\r\n      let toast = this.toastCtrl.create({\r\n        message: mensagem,\r\n        duration: 3000,\r\n        position: 'top'\r\n      });\r\n      toast.present();\r\n\r\n    }else{\r\n      let loading = this.loadingCtrl.create({\r\n        content: 'Espere...'\r\n      });\r\n\r\n      loading.present();\r\n\r\n      let vars: any = {\r\n        user_id:'',\r\n        teste: this.formulario\r\n      };\r\n\r\n      this.storage.get('clienteId').then((valor) => {\r\n          vars.user_id = valor;\r\n          this.authService.request('/api/testes/responder', vars).then((result) => {\r\n            loading.dismiss();\r\n\r\n            if(result){\r\n              let toast = this.toastCtrl.create({\r\n                message: 'Resposta salva com sucesso!',\r\n                duration: 3000,\r\n                position: 'top'\r\n              });\r\n              toast.present();\r\n\r\n              toast.onDidDismiss(() => {\r\n                this.fechar();\r\n              });\r\n            }else{\r\n              this.viewCtrl.dismiss();\r\n            }\r\n          });\r\n      });\r\n    }\r\n  }\r\n  fechar(){\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n  /****GALERIA E CAMERA */\r\n  async openCamera(index:any) {\r\n    this.indexFile = index;\r\n    const options: CameraOptions = {\r\n      quality: 10,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      sourceType: this.camera.PictureSourceType.CAMERA,\r\n      allowEdit: false\r\n    };\r\n    this.camera.getPicture(options).then(imageData => {\r\n      this.formulario[this.indexFile].respostas = imageData;\r\n      this.fileUpload = \"data:image/jpeg;base64,\" + imageData;\r\n    });\r\n  }\r\n\r\n  openSelect(index:any) {\r\n    this.indexFile = index;\r\n    this.selectFile.open();\r\n  }\r\n\r\n  openGallery() {\r\n    const options: CameraOptions = {\r\n      quality: 100,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY\r\n    };\r\n    this.camera.getPicture(options).then(imageData => {\r\n        this.formulario[this.indexFile].respostas = \"data:image/jpeg;base64,\" + imageData;\r\n        this.fileUpload = \"data:image/jpeg;base64,\" + imageData;\r\n    });\r\n  }\r\n\r\n  openGaleryOrCamera() {\r\n    if (this.galleryFile) {\r\n      this.openGallery();\r\n    } else {\r\n      this.openCamera(1);\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/quiz/quiz.ts"],"sourceRoot":""}